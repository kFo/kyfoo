ExitProcess(uExitCode : u32) : ()
GetStdHandle(nStdHandle : HANDLE) : HANDLE
WriteFile(hFile : u32, lpBuffer : pointer u8, nNumberOfBytesToWrite : u32, lpNumberOfBytesWritten : pointer u32, lpOverlapped : pointer<()>) : BOOL

HANDLE = u32
BOOL = u32

STD_INPUT_HANDLE  = 4294967286 // -10
STD_OUTPUT_HANDLE = 4294967285 // -11
STD_ERROR_HANDLE  = 4294967284 // -12

WriteWrapper(str : ascii) : () =>
    := written : u32 = 0
    WriteFile(GetStdHandle STD_OUTPUT_HANDLE, str.base, trunc<u32> str.card, addr written, null)

ftest(x : i32, y : i32) : i32 =>
    WriteWrapper(ascii "hello world!\n")
    add (add x y) y

start() : () =>
    ftest(1, 2)
    ExitProcess 42
